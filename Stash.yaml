#
# è§„åˆ™æ¥è‡ªblackmatrix7å¤§ä½¬ï¼šhttps://github.com/blackmatrix7/ios_rule_script/tree/master/rule
#
# clash æ­£åˆ™
#   (A).*(B)         èŠ‚ç‚¹åæ—¢æœ‰ A ä¹Ÿæœ‰ B 
#   (A)|(B)          èŠ‚ç‚¹åæœ‰ A æˆ–è€… B   
#   ^(?!.*A)         èŠ‚ç‚¹åä¸å«æœ‰ A 
#   ^(?!.*A).*(B)    èŠ‚ç‚¹åä¸å«æœ‰ A ä½†å«æœ‰ B
#   ^(?!.*(A|B))     èŠ‚ç‚¹åæ—¢ä¸å«æœ‰ A ä¹Ÿä¸å«æœ‰ B
#
# ç‰¹åˆ«æ³¨æ„ï¼š
#   1.url çš„å¼•å·è¦ä¿ç•™
#   2.å¦‚æœè®¢é˜…ä¸‹è½½ä¸ä¸‹æ¥å¯ä»¥å°è¯•åœ¨è®¢é˜…åé¢åŠ  &flag=clash
#
mixed-port: 7890
allow-lan: true
bind-address: '*'
mode: rule
log-level: info
ipv6: false
profile:
  store-selected: false
  tracing: false
  store-fake-ip: false
dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:1053
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  use-hosts: true
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  nameserver:
    - https://dns.alidns.com/dns-query
  fake-ip-filter:
    - '*.lan'
    - localhost.ptlogin2.qq.com
    - '+.srv.nintendo.net'
    - '+.stun.playstation.net'
    - '+.msftconnecttest.com'
    - '+.msftncsi.com'
    - '+.xboxlive.com'
    - 'msftconnecttest.com'
    - 'xbox.*.microsoft.com'
    - '*.battlenet.com.cn'
    - '*.battlenet.com'
    - '*.blzstatic.cn'
    - '*.battle.net'


# è¿œç¨‹è®¢é˜…
proxy-providers:
  Sub1:
    url: https://xxx.xxx.xxx/api/v1/client/subscribe?token=xxxxxx&flag=clash
    interval: 10800
    filter: '.*'

  Sub2:
    url: https://xxx.xxx.xxx.xxx/api/v1/client/subscribe?token=xxx&flag=clash
    interval: 10800
    filter: '.*'


# æœ¬åœ°ä»£ç†
proxies:
  - name: ğŸ“½ï¸ SP å››æ°Ÿç¡¼é…¸é“œ
    type: ss
    server: xxx.xxx.xxx
    port: 50015
    cipher: aes-128-gcm
    password: 'xxx'
    udp: true
  - name: ğŸ‡­ğŸ‡° HK ä¸é¦™é…°æ°§èƒº x 0.01
    type: ss
    server: xxx.xxx.xxx
    port: 50013
    cipher: aes-128-gcm
    password: 'xxx'
    udp: true
  - name: ğŸ‡¸ğŸ‡¬ SG è‹¯å·´æ¯”å¦¥é’  x 0.01
    type: ss
    server: xxx.xxx.xxx
    port: 50012
    cipher: aes-128-gcm
    password: 'xxx'
    udp: true
  - name: ğŸ‡±ğŸ‡º LU ç¡é…¸äºŒç”²é…¯ x 0.01
    type: ss
    server: xxx.xxx.xxx
    port: 50009
    cipher: aes-128-gcm
    password: 'xxx'
    udp: true


# ç­–ç•¥åˆ†ç»„
proxy-groups:

  - name: Proxy
    type: select
    icon: https://cdn.jsdelivr.net/gh/athlonreg/Logo/app/Airport.png
    proxies:
      - Auto
    use:
      - Sub1
      - Sub2

  - name: Auto
    type: select
    icon: https://cdn.jsdelivr.net/gh/athlonreg/Logo/app/Auto.png
    proxies:
      - ğŸ‡­ğŸ‡° Hong Kong
      - ğŸ‡¨ğŸ‡³ Taiwan
      - ğŸ‡¸ğŸ‡¬ Singapore
      - ğŸ‡¯ğŸ‡µ Japan
      - ğŸ‡ºğŸ‡¸ United States
      - ğŸ‡¬ğŸ‡§ Great Britain
      - ğŸ‡©ğŸ‡ª Germany
      - ğŸ‡±ğŸ‡º Luxembourg

  - name: Apple
    type: select
    icon: https://cdn.jsdelivr.net/gh/athlonreg/Logo/app/Apple.png
    proxies:
      - DIRECT
      - Proxy
      - ğŸ‡­ğŸ‡° Hong Kong
      - ğŸ‡¨ğŸ‡³ Taiwan
      - ğŸ‡¸ğŸ‡¬ Singapore
      - ğŸ‡¯ğŸ‡µ Japan
      - ğŸ‡ºğŸ‡¸ United States
      - ğŸ‡¬ğŸ‡§ Great Britain
      - ğŸ‡©ğŸ‡ª Germany
      - ğŸ‡±ğŸ‡º Luxembourg

  - name: Telegram
    type: select
    icon: https://cdn.jsdelivr.net/gh/athlonreg/Logo/app/Telegram.png
    proxies:
      - ğŸ‡­ğŸ‡° Hong Kong
      - ğŸ‡¸ğŸ‡¬ Singapore
      - ğŸ‡¯ğŸ‡µ Japan
      - ğŸ‡ºğŸ‡¸ United States

  - name: OpenAI
    type: select
    icon: https://cdn.jsdelivr.net/gh/athlonreg/Logo/app/OpenAIi.png
    proxies:
      - Auto
      - Proxy
      - ğŸ‡­ğŸ‡° Hong Kong
      - ğŸ‡¨ğŸ‡³ Taiwan
      - ğŸ‡¸ğŸ‡¬ Singapore
      - ğŸ‡¯ğŸ‡µ Japan
      - ğŸ‡ºğŸ‡¸ United States
      - ğŸ‡¬ğŸ‡§ Great Britain
      - ğŸ‡©ğŸ‡ª Germany
      - ğŸ‡±ğŸ‡º Luxembourg

  - name: Bing
    type: select
    icon: https://cdn.jsdelivr.net/gh/athlonreg/Logo/app/Microsoft.png
    proxies:
      - DIRECT
      - Auto
      - Proxy
      - ğŸ‡­ğŸ‡° Hong Kong
      - ğŸ‡¨ğŸ‡³ Taiwan
      - ğŸ‡¸ğŸ‡¬ Singapore
      - ğŸ‡¯ğŸ‡µ Japan
      - ğŸ‡ºğŸ‡¸ United States
      - ğŸ‡¬ğŸ‡§ Great Britain
      - ğŸ‡©ğŸ‡ª Germany
      - ğŸ‡±ğŸ‡º Luxembourg

  - name: GitHub
    type: select
    proxies:
      - DIRECT
      - Auto
      - Proxy
      - ğŸ‡­ğŸ‡° Hong Kong
      - ğŸ‡¨ğŸ‡³ Taiwan
      - ğŸ‡¸ğŸ‡¬ Singapore
      - ğŸ‡¯ğŸ‡µ Japan
      - ğŸ‡ºğŸ‡¸ United States
      - ğŸ‡¬ğŸ‡§ Great Britain
      - ğŸ‡©ğŸ‡ª Germany
      - ğŸ‡±ğŸ‡º Luxembourg

  - name: Google
    type: select
    icon: https://cdn.jsdelivr.net/gh/athlonreg/Logo/app/Google.png
    proxies:
      - ğŸ‡­ğŸ‡° Hong Kong

  - name: YouTube
    type: select
    icon: https://cdn.jsdelivr.net/gh/athlonreg/Logo/app/YouTube.png
    proxies:
      - ğŸ‡­ğŸ‡° Hong Kong

  - name: Emby
    type: select
    icon: https://cdn.jsdelivr.net/gh/athlonreg/Logo/app/Emby.png
    proxies:
      - DIRECT
      - Auto
      - Proxy
      - ğŸ‡­ğŸ‡° Hong Kong
      - ğŸ‡¨ğŸ‡³ Taiwan
      - ğŸ‡¸ğŸ‡¬ Singapore
      - ğŸ‡¯ğŸ‡µ Japan
      - ğŸ‡ºğŸ‡¸ United States
      - ğŸ‡¬ğŸ‡§ Great Britain
      - ğŸ‡©ğŸ‡ª Germany
      - ğŸ‡±ğŸ‡º Luxembourg

  - name: Twitter
    type: select
    icon: https://cdn.jsdelivr.net/gh/athlonreg/Logo/app/Twitter.png
    proxies:
      - ğŸ‡­ğŸ‡° Hong Kong

  - name: TikTok
    type: select
    icon: https://cdn.jsdelivr.net/gh/athlonreg/Logo/app/TikTok.png
    proxies:
      - Auto
      - Proxy
      - ğŸ‡­ğŸ‡° Hong Kong
      - ğŸ‡¨ğŸ‡³ Taiwan
      - ğŸ‡¸ğŸ‡¬ Singapore
      - ğŸ‡¯ğŸ‡µ Japan
      - ğŸ‡ºğŸ‡¸ United States
      - ğŸ‡¬ğŸ‡§ Great Britain
      - ğŸ‡©ğŸ‡ª Germany
      - ğŸ‡±ğŸ‡º Luxembourg

  - name: Microsoft
    type: select
    icon: https://cdn.jsdelivr.net/gh/athlonreg/Logo/app/Microsoft.png
    proxies:
      - DIRECT
      - Auto
      - Proxy
      - ğŸ‡­ğŸ‡° Hong Kong
      - ğŸ‡ºğŸ‡¸ United States

  - name: Netflix
    type: select
    icon: https://cdn.jsdelivr.net/gh/athlonreg/Logo/app/Netflix.png
    proxies:
      - Auto
      - Proxy
      - ğŸ‡­ğŸ‡° Hong Kong
      - ğŸ‡¨ğŸ‡³ Taiwan
      - ğŸ‡¸ğŸ‡¬ Singapore
      - ğŸ‡¯ğŸ‡µ Japan
      - ğŸ‡ºğŸ‡¸ United States
      - ğŸ‡¬ğŸ‡§ Great Britain
      - ğŸ‡©ğŸ‡ª Germany
      - ğŸ‡±ğŸ‡º Luxembourg

  - name: Disney
    type: select
    icon: https://cdn.jsdelivr.net/gh/athlonreg/Logo/app/Disney+.png
    proxies:
      - Auto
      - Proxy
      - ğŸ‡­ğŸ‡° Hong Kong
      - ğŸ‡¨ğŸ‡³ Taiwan
      - ğŸ‡¸ğŸ‡¬ Singapore
      - ğŸ‡¯ğŸ‡µ Japan
      - ğŸ‡ºğŸ‡¸ United States
      - ğŸ‡¬ğŸ‡§ Great Britain
      - ğŸ‡©ğŸ‡ª Germany
      - ğŸ‡±ğŸ‡º Luxembourg

  - name: Weibo
    type: select
    icon: https://cdn.jsdelivr.net/gh/athlonreg/Logo/app/Weibo.png
    proxies:
      - DIRECT
      - ğŸ‡­ğŸ‡° Hong Kong
      - ğŸ‡¨ğŸ‡³ Taiwan

  - name: BiliBili
    type: select
    icon: https://cdn.jsdelivr.net/gh/athlonreg/Logo/app/BiliBili.png
    proxies:
      - DIRECT
      - ğŸ‡­ğŸ‡° Hong Kong
      - ğŸ‡¨ğŸ‡³ Taiwan

  - name: Steam
    type: select
    icon: https://cdn.jsdelivr.net/gh/athlonreg/Logo/app/Steam.png
    proxies:
      - DIRECT
      - Auto
      - Proxy
      - ğŸ‡­ğŸ‡° Hong Kong
      - ğŸ‡¨ğŸ‡³ Taiwan
      - ğŸ‡¸ğŸ‡¬ Singapore
      - ğŸ‡¯ğŸ‡µ Japan
      - ğŸ‡ºğŸ‡¸ United States
      - ğŸ‡¬ğŸ‡§ Great Britain
      - ğŸ‡©ğŸ‡ª Germany
      - ğŸ‡±ğŸ‡º Luxembourg

  - name: Final
    type: select
    icon: https://cdn.jsdelivr.net/gh/athlonreg/Logo/app/Final.png
    proxies:
      - DIRECT
      - Auto
      - Proxy
      - ğŸ‡­ğŸ‡° Hong Kong
      - ğŸ‡¨ğŸ‡³ Taiwan
      - ğŸ‡¸ğŸ‡¬ Singapore
      - ğŸ‡¯ğŸ‡µ Japan
      - ğŸ‡ºğŸ‡¸ United States
      - ğŸ‡¬ğŸ‡§ Great Britain
      - ğŸ‡©ğŸ‡ª Germany
      - ğŸ‡±ğŸ‡º Luxembourg

  # å›½å®¶åˆ†ç»„èšåˆ
  - name: ğŸ‡­ğŸ‡° Hong Kong
    type: fallback
    icon: https://cdn.jsdelivr.net/gh/athlonreg/CountriesData/countries_flags/HK.png
    url: https://www.gstatic.com/generate_204
    interval: 60
    lazy: true
    # proxies:
    #   - ğŸ‡­ğŸ‡° HK ä¸é¦™é…°æ°§èƒº x 0.01
    use:
      - Sub1
      - Sub2
    filter: '(?i)é¦™æ¸¯|ğŸ‡­ğŸ‡°|HK|Hong'

  - name: ğŸ‡¨ğŸ‡³ Taiwan
    type: fallback
    icon: https://cdn.jsdelivr.net/gh/athlonreg/CountriesData/countries_flags/TW.png
    url: https://www.gstatic.com/generate_204
    interval: 60
    lazy: true
    proxies:
    use:
      - Sub1
      - Sub2
    filter: '(?i)å°(æ¹¾|ç£)|ğŸ‡¹ğŸ‡¼|TW|Taiwan'

  - name: ğŸ‡¸ğŸ‡¬ Singapore
    type: fallback
    icon: https://cdn.jsdelivr.net/gh/athlonreg/CountriesData/countries_flags/SG.png
    url: https://www.gstatic.com/generate_204
    interval: 60
    lazy: true
    proxies:
    use:
      - Sub1
      - Sub2
    filter: '(?i)ç‹®|ç…|ğŸ‡¸ğŸ‡¬|åŠ å¡|SG|Singapore'

  - name: ğŸ‡¯ğŸ‡µ Japan
    type: fallback
    icon: https://cdn.jsdelivr.net/gh/athlonreg/CountriesData/countries_flags/JP.png
    url: https://www.gstatic.com/generate_204
    interval: 60
    lazy: true
    proxies:
    use:
      - Sub1
      - Sub2
    filter: '(?i)æ—¥æœ¬|ğŸ‡¯ğŸ‡µ|(ä¸œ|æ±)äº¬|JP|Japan'

  - name: ğŸ‡ºğŸ‡¸ United States
    type: fallback
    icon: https://cdn.jsdelivr.net/gh/athlonreg/CountriesData/countries_flags/US.png
    url: https://www.gstatic.com/generate_204
    interval: 60
    lazy: true
    proxies:
    use:
      - Sub1
      - Sub2
    filter: '(?i)ç¾(å›½|åœ‹)|ğŸ‡ºğŸ‡¸|US|States|American'

  - name: ğŸ‡¬ğŸ‡§ Great Britain
    type: fallback
    icon: https://cdn.jsdelivr.net/gh/athlonreg/CountriesData/countries_flags/GB.png
    url: https://www.gstatic.com/generate_204
    interval: 60
    lazy: true
    proxies:
    use:
      - Sub1
      - Sub2
    filter: '(?i)è‹±(å›½|åœ‹)|ğŸ‡¬ğŸ‡§|UK|Britain|Kingdom'

  - name: ğŸ‡©ğŸ‡ª Germany
    type: fallback
    icon: https://cdn.jsdelivr.net/gh/athlonreg/CountriesData/countries_flags/DE.png
    url: https://www.gstatic.com/generate_204
    interval: 60
    lazy: true
    proxies:
    use:
      - Sub1
      - Sub2
    filter: '(?i)å¾·(å›½|åœ‹)|ğŸ‡©ğŸ‡ª|DE|Germany'

  - name: ğŸ‡±ğŸ‡º Luxembourg
    type: fallback
    icon: https://cdn.jsdelivr.net/gh/athlonreg/CountriesData/countries_flags/LU.png
    url: https://www.gstatic.com/generate_204
    interval: 60
    lazy: true
    proxies:
      - ğŸ‡±ğŸ‡º LU ç¡é…¸äºŒç”²é…¯ x 0.01

  - name: ğŸ“½ï¸ MisakaF Emby
    type: select
    icon: https://cdn.jsdelivr.net/gh/athlonreg/Logo/app/Emby.png
    use-url:
      - https://xxx.xxx.xxx/api/v1/client/subscribe?token=xxx&flag=clash
      - https://xxx.xxx.xxx/api/v1/client/subscribe?token=xxx&flag=clash
    filter: 'é¦™æ¸¯|ğŸ‡­ğŸ‡°|HK|Hong Kong'

  - name: ğŸ“½ï¸ Sub2 Streaming
    type: fallback
    icon: https://cdn.jsdelivr.net/gh/athlonreg/CountriesData/countries_flags/LU.png
    url: https://www.gstatic.com/generate_204
    interval: 60
    lazy: true
    proxies:
      - ğŸ“½ï¸ SP å››æ°Ÿç¡¼é…¸é“œ
      - ğŸ‡­ğŸ‡° HK ä¸é¦™é…°æ°§èƒº x 0.01
      - ğŸ‡¸ğŸ‡¬ SG è‹¯å·´æ¯”å¦¥é’  x 0.01
      - ğŸ‡±ğŸ‡º LU ç¡é…¸äºŒç”²é…¯ x 0.01
    # use:
    #   - Sub1
    #   - Sub2
    # filter: '(?i)0.01|SP'


# è¿œç¨‹è§„åˆ™é›†åˆ
rule-providers:

  Apple_rule:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Clash/Apple/Apple.yaml"
    path: ./RuleSet/Apple.yaml
    interval: 10800

  Telegram_rule:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Clash/Telegram/Telegram.yaml"
    path: ./RuleSet/Telegram.yaml
    interval: 10800

  OpenAI_rule:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Clash/OpenAI/OpenAI.yaml"
    path: ./RuleSet/OpenAI.yaml
    interval: 10800

  Bing_rule:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Clash/Bing/Bing.yaml"
    path: ./RuleSet/Bing.yaml
    interval: 10800

  GitHub_rule:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Clash/GitHub/GitHub.yaml"
    path: ./RuleSet/GitHub.yaml
    interval: 10800

  Google_rule:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Clash/Google/Google.yaml"
    path: ./RuleSet/Google.yaml
    interval: 10800

  YouTube_rule:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Clash/YouTube/YouTube.yaml"
    path: ./RuleSet/YouTube.yaml
    interval: 10800

  Emby_rule:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Clash/Emby/Emby.yaml"
    path: ./RuleSet/Emby.yaml
    interval: 10800

  Twitter_rule:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Clash/Twitter/Twitter.yaml"
    path: ./RuleSet/Twitter.yaml
    interval: 10800

  TikTok_rule:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Clash/TikTok/TikTok.yaml"
    path: ./RuleSet/TikTok.yaml
    interval: 10800

  Microsoft_rule:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Clash/Microsoft/Microsoft.yaml"
    path: ./RuleSet/Microsoft.yaml
    interval: 10800

  Netflix_rule:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Clash/Netflix/Netflix.yaml"
    path: ./RuleSet/Netflix.yaml
    interval: 10800

  Disney_rule:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Clash/Disney/Disney.yaml"
    path: ./RuleSet/Disney.yaml
    interval: 10800

  BiliBili_rule:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Clash/BiliBili/BiliBili.yaml"
    path: ./RuleSet/BiliBili.yaml
    interval: 10800

  Weibo_rule:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Clash/Weibo/Weibo.yaml"
    path: ./RuleSet/Weibo.yaml
    interval: 10800

  Steam_rule:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Clash/Steam/Steam.yaml"
    path: ./RuleSet/Steam.yaml
    interval: 10800

  Lan_rule:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Clash/Lan/Lan.yaml"
    path: ./RuleSet/Lan.yaml
    interval: 10800


rules:
  - DOMAIN-SUFFIX,bing.com,Bing # Bing
  - DOMAIN-SUFFIX,stream.synn.cc,ğŸ“½ï¸ SYN Streaming
  - DOMAIN-SUFFIX,ntrrr.am.sb,ğŸ“½ï¸ SYN Streaming
  - DOMAIN-SUFFIX,misakaf.org,ğŸ“½ï¸ MisakaF Emby
  - DOMAIN-SUFFIX,aca.best,ğŸ“½ï¸ MisakaF Emby
  - DOMAIN-SUFFIX,emby-misakaf.atomlantis.cloud,ğŸ“½ï¸ MisakaF Emby
  - PROCESS-NAME,Discord,Proxy # Discord
  - PROCESS-NAME,Telegram,Telegram # Telegram
  - RULE-SET,Apple_rule,Apple # Apple
  - RULE-SET,Telegram_rule,Telegram # Telegram
  - RULE-SET,OpenAI_rule,OpenAI # OpenAI
  - RULE-SET,Bing_rule,Bing # Bing
  - RULE-SET,GitHub_rule,GitHub # GitHub
  - RULE-SET,Google_rule,Google # Google
  - RULE-SET,YouTube_rule,YouTube # YouTube
  - RULE-SET,Emby_rule,Emby # Emby
  - RULE-SET,Twitter_rule,Twitter # Twitter
  - RULE-SET,TikTok_rule,TikTok # TikTok
  - RULE-SET,Microsoft_rule,Microsoft # Microsoft
  - RULE-SET,Netflix_rule,Netflix # Netflix
  - RULE-SET,Disney_rule,Disney # Disney
  - RULE-SET,Weibo_rule,Weibo # Weibo
  - RULE-SET,BiliBili_rule,BiliBili # BiliBili
  - RULE-SET,Steam_rule,Steam # Steam
  - RULE-SET,Lan_rule,DIRECT # Lan
  - GEOIP,CN,DIRECT # CN
  - MATCH,Final # Final
